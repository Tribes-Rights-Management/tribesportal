@import "./styles/tribes-theme.css";

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ═══════════════════════════════════════════════════════════════════════════════
   GLOBAL OVERFLOW SAFEGUARD — MOBILE-FIRST (LOCKED)
   
   Prevents horizontal scrolling on all surfaces. 
   CRITICAL: Never use 100vw (causes overflow with scrollbars/safe-area).
   Always use 100% + overflow-x: clip for bulletproof containment.
   ═══════════════════════════════════════════════════════════════════════════════ */
html {
  width: 100%;
  max-width: 100%;
  overflow-x: clip;
  -webkit-overflow-scrolling: touch;
}

body {
  width: 100%;
  max-width: 100%;
  overflow-x: clip;
  min-height: 100dvh;
}

/* App root container overflow clamp */
#root {
  width: 100%;
  max-width: 100%;
  overflow-x: clip;
  min-height: 100dvh;
}


/* ═══════════════════════════════════════════════════════════════════════════════
   GLOBAL SPACING SYSTEM — TRIBES STANDARD (LOCKED)

   Premium spacing tokens for Apple/Stripe/Mercury-level vertical rhythm.
   These tokens are authoritative and must be used consistently across all
   marketing pages, sections, and the footer.

   Usage:
   - Sections: Use --section-padding-* for consistent vertical rhythm
   - Gutters: Use --gutter-* for horizontal page margins
   - Internal: Use --space-* for component-level spacing
   ═══════════════════════════════════════════════════════════════════════════════ */

:root {
  /* ─────────────────────────────────────────────────────────────────────────────
     SPACING SCALE — 8px base unit, reduced ~15-20% for institutional density
     ───────────────────────────────────────────────────────────────────────────── */
  --space-0: 0px;
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 24px;
  --space-6: 32px;
  --space-7: 48px;
  --space-8: 64px;
  --space-9: 72px;
  --space-10: 88px;
  --space-11: 120px;
  --space-12: 160px;

  /* ─────────────────────────────────────────────────────────────────────────────
     CANONICAL APP PAGE PADDING — Runtime layout contract
     Mobile: 16px (px-4)
     Tablet/Desktop: 24px (px-6)
     Used by PageContainer + header bars via CSS var + safe-area max().
     ───────────────────────────────────────────────────────────────────────────── */
  --page-pad-x: 16px;
  
  /* Footer-specific tokens — Institutional grade, balanced zones */
  --footer-pt-mobile: 72px;    /* Locked: equal top/bottom */
  --footer-pt-tablet: 72px;
  --footer-pt-desktop: 72px;
  --footer-pb-mobile: 72px;    /* Locked: equal top/bottom */
  --footer-pb-tablet: 72px;
  --footer-pb-desktop: 72px;
  --footer-group-gap-mobile: 40px;   /* Column group spacing (mobile stack) */
  --footer-label-to-link-mobile: 16px;  /* Tight label→link */
  --footer-label-to-link-desktop: 16px;
  --footer-link-gap-mobile: 13px;    /* Link→link: 12-14px range */
  --footer-link-gap-desktop: 12px;
  --footer-column-gap-tablet: 40px;
  --footer-column-gap-desktop: 64px;
  --footer-signature-mt-mobile: 56px;  /* Zone gap: links → brand block */
  --footer-signature-mt-tablet: 56px;
  --footer-signature-mt-desktop: 56px;

  /* ─────────────────────────────────────────────────────────────────────────────
     PAGE GUTTERS — Horizontal container padding
     Mobile: 24px | Tablet: 32px | Desktop: 48px
     ───────────────────────────────────────────────────────────────────────────── */
  --gutter: var(--space-4); /* 24px mobile default */

  /* ─────────────────────────────────────────────────────────────────────────────
     SECTION PADDING — Vertical rhythm for major page sections
     Mobile: 96px | Tablet: 120px | Desktop: 160px
     ───────────────────────────────────────────────────────────────────────────── */
  --section-padding-y: var(--space-9); /* 96px mobile default */

  /* ─────────────────────────────────────────────────────────────────────────────
     SECTION HEADER RHYTHM — Eyebrow + headline pattern
     ───────────────────────────────────────────────────────────────────────────── */
  --eyebrow-top: var(--space-5);     /* 32px breathing room from section top */
  --eyebrow-bottom: var(--space-4);  /* 24px to headline */
  --headline-bottom: var(--space-6); /* 48px to content */

  /* ─────────────────────────────────────────────────────────────────────────────
     CONTENT RHYTHM — Internal spacing
     ───────────────────────────────────────────────────────────────────────────── */
  --paragraph-gap: 28px;             /* Between paragraph blocks */
  --card-gap: var(--space-6);        /* 48px between major items */
  --step-gap: 56px;                  /* Between numbered steps */
  --step-list-top: var(--space-4);   /* 24px above step list */
}


/* Tablet breakpoint (768px+) */
@media (min-width: 768px) {
  :root {
    --gutter: var(--space-5);          /* 32px */
    --section-padding-y: var(--space-10); /* 120px */
    --page-pad-x: 24px;
  }
}

/* Desktop breakpoint (1024px+) */
@media (min-width: 1024px) {
  :root {
    --gutter: var(--space-6);          /* 48px */
    --section-padding-y: var(--space-11); /* 160px */
  }
}

/* ═══════════════════════════════════════════════════════════════════════════════
   GLOBAL COLOR CONTRAST SYSTEM — LOCKED

   This color system is authoritative and must not drift.
   All text must pass WCAG AA contrast minimums.

   LIGHT MODE (default):
   - Primary text: foreground (HSL 0 0% 9%) — near-black
   - Secondary text: muted-foreground (HSL 0 0% 45%) — readable gray
   - Background: background (HSL 0 0% 100%) — white

   DARK SECTIONS (#111214):
   - Primary text: white/92 — Headlines, critical copy
   - Secondary text: white/70-72 — Descriptions, body copy
   - Tertiary text: white/55-65 — Labels, meta, supporting copy
   - Meta/Footer text: white/50-60 — Copyright, legal links
   - Links: white/60 default → white/80 hover
   - Dividers: white/15

   PROHIBITIONS:
   - No text below white/50 on dark backgrounds
   - No arbitrary gray values — use semantic tokens
   - No opacity-based text that reduces readability
   ═══════════════════════════════════════════════════════════════════════════════ */

/* Apple-grade Design System
   System typography, spacing-led layout, minimal dividers, calm hierarchy */

@layer base {
  :root {
    /* Header height for content clearance calculations */
    --header-height: 64px;
    /* Mobile-aware header height variable used by hero sections */
    --header-h: 56px; /* Mobile: 56px (h-14) */

    /* ═══════════════════════════════════════════════════════════════════════════
       CANONICAL VISUAL TOKENS — TRIBES INSTITUTIONAL UI (LOCKED)
       
       All tokens now derive from src/styles/tribes-theme.css (single source of truth).
       Page background = website THEME_DARK_BG (#0B0F14)
       Header background = website dark header (#111214)
       
       ENFORCEMENT: No data, tables, lists, or controls may render 
       directly on page background. All content lives inside elevated surfaces.
       ═══════════════════════════════════════════════════════════════════════════ */
    
    /* GLOBAL — Derived from tribes-theme.css (LOCKED) */
    --tribes-bg-page: var(--tribes-bg);               /* Exact website page background */
    --tribes-bg-header: var(--tribes-header-bg);      /* Exact website header color */
    --tribes-text-primary: var(--tribes-fg);          /* Pure white, maximum contrast */
    --tribes-text-secondary: var(--tribes-fg-secondary); /* Readable body copy */
    --tribes-text-muted: var(--tribes-fg-muted);      /* Captions, labels, meta */
    
    /* APPLICATION SURFACES — Derived from tribes-theme.css (LOCKED) */
    --tribes-surface-card: var(--tribes-surface);     /* Primary elevated surface */
    --tribes-surface-table: var(--tribes-surface-table); /* Table surface */
    --tribes-surface-elevated: var(--tribes-surface-elevated); /* Secondary elevation */
    --tribes-surface-nested: var(--tribes-surface-nested); /* Tertiary elevation */
    --tribes-border-subtle: var(--tribes-border);     /* Low-contrast dividers */
    --tribes-border-strong: var(--tribes-border-strong); /* Stronger separation */
    --tribes-shadow-soft: var(--tribes-shadow);       /* Restrained, institutional */
    
    /* LEGACY ALIASES — Map to canonical tokens for backward compatibility */
    --platform-canvas: var(--tribes-bg);
    --platform-surface: var(--tribes-surface);
    --platform-surface-2: var(--tribes-surface-elevated);
    --platform-surface-3: var(--tribes-surface-nested);
    --platform-border: var(--tribes-border);
    --platform-border-strong: var(--tribes-border-strong);
    --platform-text: var(--tribes-fg);
    --platform-text-secondary: var(--tribes-fg-secondary);
    --platform-text-muted: var(--tribes-fg-muted);
    --platform-accent: var(--tribes-fg);

    /* ─────────────────────────────────────────────────────────────────────────────
       AUTH GATEWAY TOKENS — YouTube Studio Soft Dark
       Dark canvas institutional access boundary.
       ───────────────────────────────────────────────────────────────────────────── */
    --auth-canvas-bg: #181818;
    --auth-canvas-gradient: linear-gradient(180deg, #181818 0%, #1E1E1E 100%);
    --auth-content-width: 380px;
    --auth-input-height: 48px;
    --auth-button-height: 48px;
    --auth-border-radius: 6px;
    --auth-font-scale: 15px;
    --auth-heading: #FFFFFF;
    --auth-body: #AAAAAA;
    --auth-muted: #717171;
    --auth-label: #717171;
    --auth-input-bg: #212121;
    --auth-input-border: #404040;
    --auth-input-border-focus: #606060;
    --auth-input-text: #FFFFFF;
    --auth-button-bg: #FFFFFF;
    --auth-button-text: #181818;
    --auth-button-hover: #E8E8E8;
    --auth-button-disabled-bg: #282828;
    --auth-button-disabled-text: #717171;

    /* ─────────────────────────────────────────────────────────────────────────────
       EDIT FLOW INPUT TOKENS — YouTube Studio Soft Dark
       Apple-grade input styling for all edit surfaces.
       Border MUST be visible on dark backgrounds.
       ───────────────────────────────────────────────────────────────────────────── */
    --edit-input-height: 48px;
    --edit-input-padding: 0 16px;
    --edit-input-font-size: 16px;                             /* CRITICAL: 16px prevents iOS Safari zoom */
    --edit-input-radius: 10px;
    --edit-input-bg: #212121;                                 /* Elevated surface */
    --edit-input-text: #FFFFFF;
    --edit-input-border: #404040;                             /* Visible border */
    --edit-input-border-focus: #606060;                       /* Stronger on focus */
    --edit-input-error-border: hsl(0 62% 50%);
    --edit-input-placeholder: #717171;
    --edit-input-disabled-opacity: 0.5;

    /* ─────────────────────────────────────────────────────────────────────────────
       INSTITUTIONAL DARK THEME — YouTube Studio-inspired Soft Dark Mode
       Warmer, more readable, better contrast than pure black
       #181818 canvas, #212121 surface, #303030 borders
       ───────────────────────────────────────────────────────────────────────────── */
    
    /* Background & Surface - Soft dark canvas (HSL of #181818 ≈ 0 0% 9%) */
    --background: 0 0% 9%;
    /* Foreground - Pure white for maximum contrast */
    --foreground: 0 0% 100%;

    /* Card surface - Elevated (HSL of #212121 ≈ 0 0% 13%) */
    --card: 0 0% 13%;
    --card-foreground: 0 0% 100%;

    --popover: 0 0% 13%;
    --popover-foreground: 0 0% 100%;

    /* Primary - Light accent on dark */
    --primary: 0 0% 100%;
    --primary-foreground: 0 0% 9%;

    /* Secondary - Subtle surface */
    --secondary: 0 0% 16%;
    --secondary-foreground: 0 0% 100%;

    /* Muted: dark surface with readable subdued text 
       --muted-foreground uses #AAAAAA (HSL ≈ 0 0% 67%) */
    --muted: 0 0% 12%;
    --muted-foreground: 0 0% 67%;

    /* Accent */
    --accent: 0 0% 16%;
    --accent-foreground: 0 0% 100%;

    /* Destructive */
    --destructive: 0 62% 55%;
    --destructive-foreground: 0 0% 100%;

    /* Borders: visible but subtle (HSL of #303030 ≈ 0 0% 19%) */
    --border-hsl: 0 0% 19%;
    --input-border: 0 0% 22%;
    --input: 0 0% 19%;
    --ring-hsl: 0 0% 100% / 0.25%;

    /* Institutional radius scale - sharp, not playful */
    --radius: 6px;
    --radius-lg: 8px;
    --radius-input: 10px;
    --radius-button: 6px;

    /* Institutional component heights */
    --button-height: 40px;
    --input-height: 48px;

    /* ─────────────────────────────────────────────────────────────────────────────
       UNIVERSAL CONTROL GEOMETRY TOKENS — APP-WIDE (LOCKED)
       These tokens apply to all controls across the entire application.
       Console-scope inherits these but may override for console-specific styling.
       ───────────────────────────────────────────────────────────────────────────── */
    --control-height-xs: 28px;
    --control-height-sm: 36px;
    --control-height-md: 44px;
    --control-height-lg: 52px;
    --control-radius: 6px;
    --control-radius-sm: 6px;
    --surface-radius: 16px;
    --surface-radius-sm: 12px;

    /* ─────────────────────────────────────────────────────────────────────────────
       INSTITUTIONAL BUTTON TOKENS — BORDER-BASED, MONOCHROMATIC
       Subtle, sophisticated, governance-focused. No filled backgrounds.
       Think: Financial terminal, not SaaS dashboard.
       ───────────────────────────────────────────────────────────────────────────── */
    
    /* PRIMARY: White border on transparent - main actions */
    --app-btn-primary-bg: transparent;
    --app-btn-primary-bg-hover: 0 0% 100% / 0.08;
    --app-btn-primary-bg-active: 0 0% 100% / 0.12;
    --app-btn-primary-bg-disabled: transparent;
    --app-btn-primary-fg: 0 0% 100%;
    --app-btn-primary-fg-disabled: 0 0% 100% / 0.4;
    --app-btn-primary-border: 0 0% 100%;
    --app-btn-primary-border-hover: 0 0% 100%;

    /* SECONDARY: Dark gray border - less important actions */
    --app-btn-secondary-bg: transparent;
    --app-btn-secondary-bg-hover: 0 0% 100% / 0.04;
    --app-btn-secondary-fg: 0 0% 67%;
    --app-btn-secondary-fg-hover: 0 0% 100%;
    --app-btn-secondary-border: 0 0% 19%;
    --app-btn-secondary-border-hover: 0 0% 31%;

    /* TERTIARY/TEXT: No border, text only - inline actions */
    --app-btn-tertiary-fg: 0 0% 67%;
    --app-btn-tertiary-fg-hover: 0 0% 100%;

    /* GHOST: Invisible until hover */
    --app-btn-ghost-bg: transparent;
    --app-btn-ghost-bg-hover: 0 0% 100% / 0.04;
    --app-btn-ghost-fg: 0 0% 67%;

    /* DANGER: Red border - destructive actions */
    --app-btn-danger-bg: transparent;
    --app-btn-danger-bg-hover: 0 72% 51% / 0.1;
    --app-btn-danger-fg: 0 84% 60%;
    --app-btn-danger-border: 0 84% 60%;

    /* ─────────────────────────────────────────────────────────────────────────────
       APP CHIP TOKENS — STATUS INDICATORS (YouTube Studio soft dark)
       Non-interactive chips for status display across the application.
       ───────────────────────────────────────────────────────────────────────────── */
    --app-chip-pending-bg: 0 0% 16%;
    --app-chip-pending-border: 0 0% 25%;
    --app-chip-pending-fg: 0 0% 55%;
    
    --app-chip-running-bg: 217 91% 60% / 0.12;
    --app-chip-running-border: 217 91% 60% / 0.25;
    --app-chip-running-fg: 213 93% 68%;
    
    --app-chip-pass-bg: 142 71% 45% / 0.12;
    --app-chip-pass-border: 142 71% 45% / 0.22;
    --app-chip-pass-fg: 142 69% 58%;
    
    --app-chip-warning-bg: 48 96% 53% / 0.12;
    --app-chip-warning-border: 48 96% 53% / 0.22;
    --app-chip-warning-fg: 48 96% 53%;
    
    --app-chip-fail-bg: 0 72% 51% / 0.12;
    --app-chip-fail-border: 0 72% 51% / 0.22;
    --app-chip-fail-fg: 0 91% 71%;

    /* ─────────────────────────────────────────────────────────────────────────────
       CANONICAL INPUT STYLING — APPLE-GRADE (YouTube Studio soft dark)
       
       All inputs across the app must use these tokens for consistency.
       Visible borders on dark backgrounds. Focus states clearly indicated.
       ───────────────────────────────────────────────────────────────────────────── */
    --edit-input-bg: #181818;
    --edit-input-border: #404040;
    --edit-input-border-focus: #606060;
    --edit-input-text: #FFFFFF;
    --edit-input-placeholder: #717171;
    --edit-input-height: 48px;
    --edit-input-radius: 10px;
    --edit-input-padding: 0 16px;
    --edit-input-font-size: 15px;
    --edit-input-error-border: hsl(0 62% 50%);
    --edit-input-disabled-opacity: 0.5;

    /* Tribes consent checkbox tokens (LOCKED) */
    --tribes-checkbox-border: 0 0% 100% / 0.15;
    --tribes-checkbox-border-checked: 0 0% 100% / 0.30;
    --tribes-checkbox-check: 0 0% 100%;
    --tribes-checkbox-focus: 0 0% 100% / 0.15;

    /* App surface - soft dark canvas */
    --app-surface: 0 0% 9%;
    
    /* Sidebar - soft dark institutional */
    --sidebar-background: 0 0% 11%;
    --sidebar-foreground: 0 0% 67%;
    --sidebar-primary: 0 0% 100%;
    --sidebar-primary-foreground: 0 0% 9%;
    --sidebar-accent: 0 0% 16%;
    --sidebar-accent-foreground: 0 0% 100%;
    --sidebar-border: 0 0% 19%;
    --sidebar-ring: 0 0% 100% / 0.25;

    /* Semantic */
    --success: 142 71% 45%;
    --success-foreground: 0 0% 100%;
    --warning: 38 92% 50%;
    --warning-foreground: 0 0% 9%;
    --info: 199 89% 48%;
    --info-foreground: 0 0% 100%;
  }
}

/* ═══════════════════════════════════════════════════════════════════════════════
   SYSTEM CONSOLE SCOPE — INSTITUTIONAL CONTROL PLANE (LOCKED)
   
   This scope provides console-specific tokens that enforce institutional styling
   for all /admin routes. Console components inherit these tokens automatically.
   
   ENFORCEMENT:
   - No bright white fills on primary buttons
   - Dark, restrained surfaces throughout
   - Subtle borders, high-contrast text
   - Consistent 44px control height, 12px radius
   ═══════════════════════════════════════════════════════════════════════════════ */
.console-scope {
  /* ─────────────────────────────────────────────────────────────────────────────
     FOUNDATIONAL SURFACES — YouTube Studio Soft Dark
     ───────────────────────────────────────────────────────────────────────────── */
  --console-bg: #181818;
  --console-fg: #FFFFFF;
  --console-fg-secondary: #AAAAAA;
  --console-fg-muted: #717171;
  
  /* Card/panel surfaces with slight elevation */
  --console-card-bg: #212121;
  --console-card-fg: #FFFFFF;
  --console-card-border: #303030;
  
  /* Elevated surface (modals, dropdowns) */
  --console-elevated-bg: #282828;
  --console-elevated-border: #404040;
  
  /* ─────────────────────────────────────────────────────────────────────────────
     CONTROL GEOMETRY — LOCKED
     ───────────────────────────────────────────────────────────────────────────── */
  --console-control-height: 44px;
  --console-control-height-sm: 36px;
  --console-control-height-xs: 28px;
  --console-control-radius: 12px;
  --console-control-radius-sm: 8px;
  --console-chip-radius: 9999px;
  
  /* ─────────────────────────────────────────────────────────────────────────────
     PRIMARY BUTTON — INSTITUTIONAL (NOT WHITE PILL)
     Dark elevated surface with subtle border
     ───────────────────────────────────────────────────────────────────────────── */
  --console-primary-bg: #2D2D2D;
  --console-primary-bg-hover: #383838;
  --console-primary-bg-disabled: #252525;
  --console-primary-fg: #FFFFFF;
  --console-primary-fg-disabled: #717171;
  --console-primary-border: #404040;
  --console-primary-border-hover: #4A4A4A;
  
  /* ─────────────────────────────────────────────────────────────────────────────
     SECONDARY/GHOST BUTTON
     ───────────────────────────────────────────────────────────────────────────── */
  --console-secondary-bg: transparent;
  --console-secondary-bg-hover: #282828;
  --console-secondary-fg: #AAAAAA;
  --console-secondary-border: #303030;
  
  /* ─────────────────────────────────────────────────────────────────────────────
     DANGER/DESTRUCTIVE
     ───────────────────────────────────────────────────────────────────────────── */
  --console-danger-bg: hsla(0, 72%, 51%, 0.15);
  --console-danger-bg-hover: hsla(0, 72%, 51%, 0.22);
  --console-danger-fg: hsl(0 84% 68%);
  --console-danger-border: hsla(0, 72%, 51%, 0.30);
  
  /* ─────────────────────────────────────────────────────────────────────────────
     STATUS CHIPS — Soft dark, visible fills
     ───────────────────────────────────────────────────────────────────────────── */
  --console-chip-pending-bg: #282828;
  --console-chip-pending-border: #404040;
  --console-chip-pending-fg: #717171;
  
  --console-chip-running-bg: hsla(217, 91%, 60%, 0.12);
  --console-chip-running-border: hsla(217, 91%, 60%, 0.25);
  --console-chip-running-fg: hsl(213 93% 68%);
  
  --console-chip-pass-bg: hsla(142, 71%, 45%, 0.12);
  --console-chip-pass-border: hsla(142, 71%, 45%, 0.22);
  --console-chip-pass-fg: hsl(142 69% 58%);
  
  --console-chip-warning-bg: hsla(48, 96%, 53%, 0.12);
  --console-chip-warning-border: hsla(48, 96%, 53%, 0.22);
  --console-chip-warning-fg: hsl(48 96% 53%);
  
  --console-chip-fail-bg: hsla(0, 72%, 51%, 0.12);
  --console-chip-fail-border: hsla(0, 72%, 51%, 0.22);
  --console-chip-fail-fg: hsl(0 91% 71%);
  
  /* ─────────────────────────────────────────────────────────────────────────────
     SEVERITY CHIPS
     ───────────────────────────────────────────────────────────────────────────── */
  --console-severity-high-bg: hsla(0, 72%, 51%, 0.15);
  --console-severity-high-border: hsla(0, 72%, 51%, 0.25);
  --console-severity-high-fg: hsl(0 91% 71%);
  
  --console-severity-medium-bg: hsla(48, 96%, 53%, 0.15);
  --console-severity-medium-border: hsla(48, 96%, 53%, 0.25);
  --console-severity-medium-fg: hsl(48 96% 53%);
  
  --console-severity-low-bg: hsla(217, 91%, 60%, 0.15);
  --console-severity-low-border: hsla(217, 91%, 60%, 0.25);
  --console-severity-low-fg: hsl(213 93% 68%);
}

/* ═══════════════════════════════════════════════════════════════════════════════
   GLOBAL TYPOGRAPHY SCALE — LOCKED

   This typography system is authoritative and must not drift.
   No page-specific overrides. Mercury/JPMorgan reference standard.

   H1: 32px (mobile) / 40px (desktop), Semibold, -0.015em tracking
   H2: 20px globally, Medium weight, subordinate to H1
   Body: 16px, Regular, 1.65 line-height for long-form reading
   Meta: 13px for helper text, labels

   SPACING:
   - H1 margin-bottom: 12px (tight coupling to intro)
   - H2 margin-bottom: 16px
   - Paragraph gap: 1rem (not stacked whitespace)
   ═══════════════════════════════════════════════════════════════════════════════ */
@layer base {
  * {
    @apply border-border;
  }

  /* ═══════════════════════════════════════════════════════════════════════════
     GLOBAL VIEWPORT + iOS SAFARI FIX — PREVENTS WHITE FALL-THROUGH

     CRITICAL: html/body background is DARK by default to prevent white bleed
     on iOS Safari during bounce, dynamic viewport changes, and safe-area reveal.

     Light pages explicitly paint their own white background via layout wrappers.
     ═══════════════════════════════════════════════════════════════════════════ */
  html {
    /* ═══════════════════════════════════════════════════════════════════════
       AUTHORITATIVE GLOBAL BACKGROUND — EXACT MATCH with website THEME_DARK_BG
       This is the single source of truth for the outer canvas color.
       ═══════════════════════════════════════════════════════════════════════ */
    background: var(--tribes-bg) !important;
    background-color: var(--tribes-bg) !important;
    margin: 0;
    padding: 0;
    min-height: 100%;
    /* Prevent bounce showing different color */
    overscroll-behavior-y: none;
    /* Prevent text size adjustments on iOS */
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }

  body {
    /* ═══════════════════════════════════════════════════════════════════════
       AUTHORITATIVE BODY BACKGROUND — EXACT MATCH with website THEME_DARK_BG
       ═══════════════════════════════════════════════════════════════════════ */
    background: var(--tribes-bg) !important;
    background-color: var(--tribes-bg) !important;
    /* Text uses website THEME_DARK_TEXT_PRIMARY (92% white) */
    color: var(--tribes-text);
    /* Apple-grade font smoothing */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    /* Institutional: 14px base for density */
    font-size: 14px;
    line-height: 1.5;
    letter-spacing: 0;
    margin: 0;
    padding: 0;
    /* Prevent horizontal overflow */
    overflow-x: hidden;
    /* Prevent bounce showing different color */
    overscroll-behavior-y: none;
    /* iOS Safari viewport fix - use dvh for true viewport */
    min-height: 100vh;
    min-height: 100dvh;
  }

  /* Auth routes: prevent scroll, lock to viewport */
  body.auth-no-scroll {
    overflow: hidden;
    height: 100dvh;
    height: 100vh;
  }

  /* App root element(s) - ensures full viewport coverage */
  #root,
  #__next {
    position: relative;
    z-index: 1;
    /* Institutional dark canvas - EXACT MATCH with website */
    background: var(--tribes-bg) !important;
    background-color: var(--tribes-bg) !important;
    /* iOS Safari viewport units - cascading fallbacks */
    min-height: 100vh;
    min-height: 100dvh;
    min-height: 100svh;
    /* Safe area padding for notched devices */
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* iOS underlay - paints behind everything to prevent white bleed */
  #ios-underlay {
    background: var(--tribes-bg) !important;
    background-color: var(--tribes-bg) !important;
  }

  /* App shell wrapper - inherits canonical background */
  .app-shell {
    background: var(--tribes-bg);
    color: var(--tribes-fg);
  }

  /* H1 — Primary page heading. Marketing site alignment: 32px, 700, -0.02em */
  h1 {
    font-size: 32px;
    font-weight: 700;
    line-height: 1.125;
    letter-spacing: -0.02em;
    scroll-margin-top: calc(var(--header-height) + 16px);
  }

  @media (min-width: 768px) {
    :root {
      /* Desktop: 64px (h-16) */
      --header-h: 64px;
    }
    
    h1 {
      font-size: 40px;
    }
  }

  /* H2 — Section titles. Marketing site alignment. */
  h2 {
    font-size: 24px;
    font-weight: 600;
    line-height: 1.25;
    letter-spacing: -0.015em;
    scroll-margin-top: calc(var(--header-height) + 16px);
  }

  /* H3-H6 — Subsection headings */
  h3 {
    font-size: 18px;
    font-weight: 600;
    line-height: 1.35;
  }

  h4, h5, h6 {
    font-size: 14px;
    font-weight: 600;
    line-height: 1.4;
  }

  /* Paragraph rhythm — use gap between siblings, not stacked margins */
  p + p {
    margin-top: 1rem;
  }
}

/* ═══════════════════════════════════════════════════════════════════════════════
   MOBILE TEXT SAFETY + ANTI-CLIPPING RULES (LOCKED)

   ENFORCED:
   - No fixed heights on text containers that could clip content
   - Proper line-height for all text elements (titles 1.2-1.3, body 1.4-1.6)
   - Tap targets >= 44px for interactive elements
   - No unintentional overflow-hidden that clips text

   RULES:
   - Titles may truncate to 1 line with ellipsis via line-clamp-1
   - Descriptions may wrap OR use line-clamp-2 with drill-in affordance
   - Never clip text without explicit truncation intent
   ═══════════════════════════════════════════════════════════════════════════════ */

/* Mobile-safe typography defaults */
@layer base {
  /* Ensure readable line heights globally */
  h1, h2, h3, h4, h5, h6 {
    line-height: 1.2;
    word-wrap: break-word;
    overflow-wrap: break-word;
  }

  p, span, label, li, td, th {
    line-height: 1.5;
    word-wrap: break-word;
    overflow-wrap: break-word;
  }

  /* Mobile tap target safety - minimum 44px for interactive elements */
  @media (max-width: 640px) {
    button,
    [role="button"],
    a[href],
    input,
    select,
    textarea {
      min-height: 44px;
    }
    
    /* Exception: inline links and small icon buttons */
    a.inline-link,
    button.icon-button-sm,
    [data-compact-button] {
      min-height: auto;
    }
  }

  /* Prevent accidental text clipping */
  .card,
  .panel,
  [role="listitem"],
  [role="row"] {
    /* Use min-height instead of fixed height to allow text to expand */
    height: auto;
  }

  /* Intentional truncation classes */
  .truncate-title {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}

@layer components {
  /* Status chips - outline only, neutral */
  .status-chip {
    @apply inline-flex items-center px-2 py-0.5 rounded-md text-xs font-medium;
    @apply border border-border bg-transparent text-muted-foreground;
  }

  /* ─────────────────────────────────────────────────────────────────────────────
     SECTION PADDING — Premium vertical rhythm for marketing pages
     Uses CSS custom properties from :root for responsive values
     ───────────────────────────────────────────────────────────────────────────── */
  .section-padding {
    padding-top: var(--section-padding-y);
    padding-bottom: var(--section-padding-y);
  }

  /* Footer compact padding — original spacing for root temp page */
  .footer-padding {
    padding-top: var(--section-padding-y);
    padding-bottom: var(--space-9); /* 96px bottom on all sizes */
  }

  /* Footer premium institutional padding — standard for all marketing pages */
  .footer-padding-standard {
    padding-top: var(--footer-pt-mobile);
    padding-bottom: var(--footer-pb-mobile);
  }

  /* Footer standard internal spacing utilities */
  .footer-label-spacing {
    margin-bottom: var(--footer-label-to-link-mobile);
  }
  
  .footer-link-spacing {
    margin-top: var(--footer-link-gap-mobile);
  }
  
  .footer-signature-spacing {
    margin-top: var(--footer-signature-mt-mobile);
  }

  @media (min-width: 768px) {
    .footer-padding-standard {
      padding-top: var(--footer-pt-tablet);
      padding-bottom: var(--footer-pb-tablet);
    }
    
    .footer-label-spacing {
      margin-bottom: var(--footer-label-to-link-desktop);
    }
    
    .footer-link-spacing {
      margin-top: var(--footer-link-gap-desktop);
    }
    
    .footer-signature-spacing {
      margin-top: var(--footer-signature-mt-tablet);
    }
  }

  @media (min-width: 1024px) {
    .footer-padding-standard {
      padding-top: var(--footer-pt-desktop);
      padding-bottom: var(--footer-pb-desktop);
    }
    
    .footer-signature-spacing {
      margin-top: var(--footer-signature-mt-desktop);
    }
  }

  /* Section spacing */
  .section-gap {
    @apply mb-8; /* 32px */
  }

  .subsection-gap {
    @apply mb-6; /* 24px */
  }

  .row-gap {
    @apply mb-3; /* 12px */
  }

  /* Hairline divider */
  .divider {
    @apply h-px bg-border/50;
  }

  /* Row density - static classes */
  .row-comfortable {
    @apply py-4; /* ~16px vertical = 56px total */
  }

  .row-compact {
    @apply py-2.5; /* ~10px vertical = 44px total */
  }

  /* Global row density selector - auto-switches based on html[data-ui-density] */
  .row-density {
    @apply py-4; /* Default: comfortable */
  }
}

/* ═══════════════════════════════════════════════════════════════════════════════
   UI DENSITY SYSTEM — GLOBAL COMPACT MODE OVERRIDES
   
   Activated via html[data-ui-density="compact"]
   Applied by AppUiBoot component based on user preference or workspace policy.
   ═══════════════════════════════════════════════════════════════════════════════ */
html[data-ui-density="compact"] {
  /* Row density override - tighter rows for compact mode */
  .row-density {
    @apply py-2.5; /* ~10px vertical = 44px total (minimum tap target) */
  }

  /* Panels and cards: reduce internal padding slightly */
  .settings-section-card,
  [data-panel],
  .panel {
    /* Reduce section header padding */
  }

  /* Table cells: reduce vertical padding */
  td, th {
    padding-top: 0.5rem !important;
    padding-bottom: 0.5rem !important;
  }

  /* CRITICAL: Preserve 16px input font size to prevent iOS zoom */
  input,
  textarea,
  select {
    font-size: 16px !important;
  }
}

@layer components {

  /* ═══════════════════════════════════════════════════════════════════════════
     GLOBAL INTERACTION STATE SYSTEM — LOCKED
     ═══════════════════════════════════════════════════════════════════════════ */

  /* Focus ring - visible, 1px solid, 2px offset */
  .focus-ring {
    @apply focus-visible:outline-none;
  }

  .focus-ring:focus-visible {
    outline: 1px solid hsl(0 0% 9% / 0.4);
    outline-offset: 2px;
  }

  /* Hover state - subtle opacity shift only, institutional timing */
  .hover-subtle {
    @apply transition-opacity duration-[280ms] ease-in-out;
  }

  .hover-subtle:hover {
    opacity: 0.88;
  }

  /* Button hover - subtle brightness shift, institutional timing */
  .btn-hover {
    @apply transition-[filter,opacity] duration-[280ms] ease-in-out;
  }

  .btn-hover:hover {
    filter: brightness(0.94);
  }

  .btn-hover:active {
    opacity: 0.88;
  }

  /* Link hover - underline emphasis, institutional timing */
  .link-hover {
    @apply transition-[text-decoration-color,opacity] duration-[280ms] ease-in-out;
    text-decoration: underline;
    text-decoration-color: transparent;
    text-underline-offset: 2px;
  }

  .link-hover:hover {
    text-decoration-color: currentColor;
  }

  /* Link simple - opacity shift only (for navigation), institutional timing */
  .link-simple {
    @apply transition-opacity duration-[280ms] ease-in-out;
  }

  .link-simple:hover {
    opacity: 0.75;
  }

  /* Disabled state - opacity only, no events */
  .state-disabled {
    @apply opacity-50 pointer-events-none cursor-not-allowed;
  }

  /* Input focus - border emphasis, no ring glow, institutional timing */
  .input-focus {
    @apply transition-[border-color] duration-[280ms] ease-in-out;
  }

  .input-focus:hover:not(:disabled):not(:focus) {
    border-color: hsl(0 0% 70%);
  }

  .input-focus:focus {
    border-color: hsl(0 0% 50%);
    outline: none;
  }

  /* Label style */
  .label-muted {
    @apply text-xs font-medium text-muted-foreground;
  }
}

/* ═══════════════════════════════════════════════════════════════════════════════
   FORM PRIMITIVE HARD OVERRIDES — TRIBES INSTITUTIONAL STANDARD (LOCKED)

   Purpose: ensure NO default/consumer-grade form UI survives anywhere.
   Applies to: all forms across the site (public + auth + portal + admin).
   Excludes: non-form UI by scoping to <form> where possible.

   Non-negotiables:
   - No filled-square checkbox state
   - No pill inputs
   - No glows/shadows
   - Strong disabled contrast separation
   ═══════════════════════════════════════════════════════════════════════════════ */

@layer base {
  /* Inputs / textareas / selects — hard reset inside forms */
  :where(form) :where(
      input:not([type="checkbox"]):not([type="radio"]):not([type="range"]):not([type="file"]):not([type="color"]),
      textarea,
      select
    ) {
    -webkit-appearance: none;
    appearance: none;
    border-radius: 6px;
    border-width: 1px;
    border-style: solid;
    border-color: hsl(0 0% 82%); /* ~#d0d0d0 */
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    font-size: 13px;
    line-height: 1.4;
    padding: 8px 10px; /* compact, institutional */
    min-height: 40px;
    box-shadow: none;
  }

  :where(form) textarea {
    min-height: 120px;
    padding-top: 12px;
    resize: none;
  }

  :where(form) :where(input, textarea)::placeholder {
    color: hsl(0 0% 55%);
  }

  :where(form) :where(input, textarea, select):disabled {
    background-color: hsl(0 0% 98%);
    border-color: hsl(0 0% 86%);
    color: hsl(0 0% 45%);
    cursor: not-allowed;
  }

  /* Focus: darker border, no glow, no layout shift */
  :where(form) :where(input, textarea, select):focus {
    outline: none;
    border-color: hsl(0 0% 7%); /* ~#111 */
  }

  /* Primary submit buttons (native) */
  :where(form) button[type="submit"],
  :where(form) button:not([type]) {
    border-radius: 6px;
    min-height: 38px;
  }

  :where(form) button[type="submit"] {
    width: 100%;
    background-color: hsl(var(--foreground));
    color: hsl(var(--background));
    font-size: 13px;
    font-weight: 500;
    box-shadow: none;
    transition: opacity 280ms ease-in-out;
  }

  :where(form) button[type="submit"]:hover {
    opacity: 0.9;
  }

  :where(form) button[type="submit"]:disabled {
    background-color: hsl(0 0% 64%);
    color: hsl(0 0% 100%);
    opacity: 1;
    cursor: not-allowed;
    pointer-events: none;
  }

  /* Radix Checkbox (role="checkbox") — FORCIBLY NO FILL WHEN CHECKED */
  button[role="checkbox"][data-state] {
    background-color: hsl(var(--background)) !important;
    border: 1px solid hsl(0 0% 82%) !important;
    border-radius: 2px !important;
    box-shadow: none !important;
  }

  button[role="checkbox"][data-state="checked"] {
    background-color: hsl(var(--background)) !important;
    border-color: hsl(0 0% 32%) !important;
    color: hsl(0 0% 7%) !important;
  }

  button[role="checkbox"][data-state][data-disabled] {
    opacity: 0.45 !important;
  }

  /* Native checkbox fallback (if any exist) — EXCLUDES TribesCheckbox */
  :where(form) input[type="checkbox"]:not([data-tribes-checkbox]) {
    -webkit-appearance: none;
    appearance: none;
    width: 18px;
    height: 18px;
    border-radius: 2px;
    border: 1px solid hsl(0 0% 82%);
    background-color: hsl(var(--background));
    display: inline-grid;
    place-content: center;
  }

  :where(form) input[type="checkbox"]:not([data-tribes-checkbox]):checked {
    border-color: hsl(0 0% 32%);
    background-color: hsl(var(--background));
  }

  :where(form) input[type="checkbox"]:not([data-tribes-checkbox]):checked::after {
    content: "";
    width: 10px;
    height: 10px;
    transform: translateY(-0.5px) rotate(45deg);
    border-right: 2px solid hsl(0 0% 7%);
    border-bottom: 2px solid hsl(0 0% 7%);
  }

  :where(form) input[type="checkbox"]:not([data-tribes-checkbox]):disabled {
    opacity: 0.45;
  }
}


/* ═══════════════════════════════════════════════════════════════════════════════
   UX HARDENING — TRIBES INSTITUTIONAL STANDARD (LOCKED)
   
   Global interaction polish: tap targets, focus states, link feedback,
   headline orphan prevention. Applied to all marketing pages.
   ═══════════════════════════════════════════════════════════════════════════════ */

/* C) TAP TARGETS — Minimum 44px touch area for mobile accessibility */
@layer base {
  /* Ensure all interactive elements have adequate tap area + centered content */
  a, button {
    min-height: 44px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }
  
  /* CRITICAL: Radix checkbox renders as button — prevent inflation */
  button[role="checkbox"] {
    min-height: unset;
    height: auto;
    align-items: flex-start;
  }
  
  /* Exception: inline text links within paragraphs */
  p a, li a, span a {
    min-height: auto;
    display: inline;
  }
  
  /* Navigation links get explicit padding for tap area */
  nav a {
    padding-top: 10px;
    padding-bottom: 10px;
  }
}

/* D) FOCUS STATES — Visible, subtle, brand-appropriate */
@layer base {
  /* Global focus-visible for all interactive elements */
  a:focus-visible,
  button:focus-visible,
  [role="button"]:focus-visible,
  input:focus-visible,
  textarea:focus-visible,
  select:focus-visible {
    outline: 1px solid hsl(0 0% 9% / 0.35);
    outline-offset: 2px;
  }
  
  /* Dark background focus states */
  [data-theme="dark"] a:focus-visible,
  [data-theme="dark"] button:focus-visible,
  [style*="background: #0B"] a:focus-visible,
  [style*="background: #0B"] button:focus-visible,
  [style*="backgroundColor"] a:focus-visible,
  footer a:focus-visible,
  footer button:focus-visible {
    outline-color: hsl(0 0% 100% / 0.35);
  }
  
  /* Remove default focus for mouse users */
  a:focus:not(:focus-visible),
  button:focus:not(:focus-visible) {
    outline: none;
  }
}

/* E) LINK FEEDBACK — Immediate interaction response */
@layer base {
  /* All links get pointer cursor */
  a {
    cursor: pointer;
  }
  
  /* Active/tap state for mobile */
  a:active,
  button:active {
    opacity: 0.85;
  }
}

/* F) HEADLINE ORPHAN PREVENTION — Controlled measure for premium line breaks */
@layer components {
  /* Marketing section headlines - prevent single-word orphans */
  .headline-measure {
    max-width: 90%;
  }
  
  @media (min-width: 768px) {
    .headline-measure {
      max-width: 640px;
    }
  }
}

/* G) FONT LOADING STABILITY — Prevent layout shift */
@layer base {
  /* System font stack with font-display swap for custom fonts if added */
  @font-face {
    font-family: 'SF Pro Text';
    src: local('SF Pro Text'), local('-apple-system'), local('BlinkMacSystemFont');
    font-display: swap;
  }
}

/* ═══════════════════════════════════════════════════════════════════════════════
   INTERNAL FORM SYSTEM — TRIBES INSTITUTIONAL STANDARD (LOCKED)

   Purpose: Compact, operational forms for authenticated portal contexts.
   Applies to: Licensing, Publishing, Admin, and all internal data entry.
   
   Design principles:
   - Forms are operational instruments, not marketing surfaces
   - Neutral, system-oriented language only
   - No reassurance or explanatory copy
   - Compact spacing for repeat professional use

   Spacing tokens:
   - Field-to-field: 12-16px (--internal-field-gap)
   - Section-to-section: 24-32px (--internal-section-gap)
   - Label-to-input: 4-6px (--internal-label-gap)
   - Button group: 16-24px above (--internal-button-gap)
   ═══════════════════════════════════════════════════════════════════════════════ */

:root {
  /* Internal form spacing tokens - tighter for institutional density */
  --internal-field-gap: 12px;      /* Reduced for compact forms */
  --internal-section-gap: 24px;    /* Tighter section gaps */
  --internal-label-gap: 4px;       /* Minimal label spacing */
  --internal-button-gap: 16px;     /* Compact button separation */
  --internal-helper-gap: 3px;      /* Tight helper text */
  
  /* Internal form max-width (aligned to app content grid) */
  --internal-form-width: 520px;
  --internal-form-width-narrow: 380px;
  --internal-form-width-wide: 680px;
}

@layer components {
  /* ═══════════════════════════════════════════════════════════════════════════
     INTERNAL FORM CONTAINER — Main wrapper for portal forms
     ═══════════════════════════════════════════════════════════════════════════ */
  .internal-form {
    max-width: var(--internal-form-width);
    width: 100%;
  }

  .internal-form-narrow {
    max-width: var(--internal-form-width-narrow);
    width: 100%;
  }

  .internal-form-wide {
    max-width: var(--internal-form-width-wide);
    width: 100%;
  }

  /* ═══════════════════════════════════════════════════════════════════════════
     INTERNAL FORM SECTION — Groups related fields with subtle header
     ═══════════════════════════════════════════════════════════════════════════ */
  .internal-form-section {
    margin-bottom: var(--internal-section-gap);
  }

  .internal-form-section:last-child {
    margin-bottom: 0;
  }

  .internal-form-section-header {
    font-size: 10px;
    font-weight: 500;
    color: hsl(var(--muted-foreground));
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 12px;
    padding-bottom: 5px;
    border-bottom: 1px solid hsl(var(--border));
  }

  .internal-form-section-title {
    font-size: 12px;
    font-weight: 500;
    color: hsl(var(--foreground));
    margin-bottom: 8px;
  }

  /* ═══════════════════════════════════════════════════════════════════════════
     INTERNAL FORM FIELD STACK — Compact vertical field spacing
     ═══════════════════════════════════════════════════════════════════════════ */
  .internal-form-fields {
    display: flex;
    flex-direction: column;
    gap: var(--internal-field-gap);
  }

  /* ═══════════════════════════════════════════════════════════════════════════
     INTERNAL FORM FIELD — Individual field wrapper with tight label spacing
     ═══════════════════════════════════════════════════════════════════════════ */
  .internal-form-field {
    display: flex;
    flex-direction: column;
    gap: var(--internal-label-gap);
  }

  /* Internal form label - concise, factual, always visible */
  .internal-form-label {
    font-size: 11px;
    font-weight: 500;
    color: hsl(var(--foreground));
    line-height: 1.35;
  }

  /* Internal form helper text - minimal, low-contrast, factual */
  .internal-form-helper {
    font-size: 10px;
    color: hsl(var(--muted-foreground));
    line-height: 1.4;
    margin-top: var(--internal-helper-gap);
  }

  /* Internal form error - inline, concise, specific */
  .internal-form-error {
    font-size: 10px;
    color: hsl(0 0% 35%);
    line-height: 1.4;
    margin-top: var(--internal-helper-gap);
  }

  /* ═══════════════════════════════════════════════════════════════════════════
     INTERNAL FORM ROW — Horizontal field grouping (2-3 fields)
     ═══════════════════════════════════════════════════════════════════════════ */
  .internal-form-row {
    display: grid;
    gap: 16px;
  }

  .internal-form-row-2 {
    grid-template-columns: repeat(2, 1fr);
  }

  .internal-form-row-3 {
    grid-template-columns: repeat(3, 1fr);
  }

  @media (max-width: 640px) {
    .internal-form-row-2,
    .internal-form-row-3 {
      grid-template-columns: 1fr;
    }
  }

  /* ═══════════════════════════════════════════════════════════════════════════
     INTERNAL FORM ACTIONS — Button group with proper spacing
     ═══════════════════════════════════════════════════════════════════════════ */
  .internal-form-actions {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-top: var(--internal-button-gap);
    padding-top: var(--internal-button-gap);
    border-top: 1px solid hsl(var(--border));
  }

  .internal-form-actions-simple {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-top: var(--internal-button-gap);
  }

  /* Primary action should be first, no explicit justification */
  .internal-form-actions-right {
    justify-content: flex-end;
  }

  /* Destructive actions pushed to end */
  .internal-form-actions-space {
    justify-content: space-between;
  }

  /* ═══════════════════════════════════════════════════════════════════════════
     INTERNAL FORM DIVIDER — Subtle section separator
     ═══════════════════════════════════════════════════════════════════════════ */
  .internal-form-divider {
    height: 1px;
    background-color: hsl(var(--border));
    margin: var(--internal-section-gap) 0;
  }

  /* ═══════════════════════════════════════════════════════════════════════════
     INTERNAL FORM INLINE ROW — Key-value or label-action pairs
     ═══════════════════════════════════════════════════════════════════════════ */
  .internal-form-inline {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
    min-height: 40px;
  }

  .internal-form-inline-label {
    font-size: 12px;
    font-weight: 500;
    color: hsl(var(--foreground));
  }

  .internal-form-inline-value {
    font-size: 12px;
    color: hsl(var(--muted-foreground));
  }

  /* ═══════════════════════════════════════════════════════════════════════════
     APPROVAL FORM — Extremely compact, decision-focused
     ═══════════════════════════════════════════════════════════════════════════ */
  .approval-form {
    max-width: 480px;
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .approval-form-identity {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px;
    background-color: hsl(var(--muted));
    border-radius: 6px;
  }

  .approval-form-identity-avatar {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background-color: hsl(var(--background));
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .approval-form-identity-details {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }

  .approval-form-identity-email {
    font-size: 13px;
    font-weight: 500;
    color: hsl(var(--foreground));
  }

  .approval-form-identity-meta {
    font-size: 11px;
    color: hsl(var(--muted-foreground));
  }

  .approval-form-actions {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-top: 4px;
  }
}

@layer utilities {
  /* ═══════════════════════════════════════════════════════════════════════════
     iOS SAFARI VIEWPORT UTILITIES — LOCKED
     
     These utilities ensure full viewport coverage on iOS Safari with
     dynamic viewport height support and safe-area handling.
     ═══════════════════════════════════════════════════════════════════════════ */
  
  /* Full dynamic viewport height - iOS Safari compatible */
  .min-h-dvh {
    min-height: 100vh;
    min-height: 100dvh;
  }

  /* Safe area bottom padding for notched devices */
  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* Content fade - opacity only, institutional timing */
  .animate-content-fade {
    animation: contentFade 280ms ease-in-out forwards;
  }

  @keyframes contentFade {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  /* Button active state - subtle feedback, institutional timing */
  .btn-active {
    @apply active:opacity-90 active:transition-opacity active:duration-[280ms] active:ease-in-out;
  }

  /* Global focus visible for dark surfaces */
  [data-surface="dark"] *:focus-visible {
    outline: 1px solid hsl(0 0% 100% / 0.4) !important;
    outline-offset: 2px;
  }

  /* ═══════════════════════════════════════════════════════════════════════════
     INSTITUTIONAL MOTION SYSTEM — LOCKED
     
     All motion uses calm, financial-grade timing:
     - Micro-interactions: 280ms
     - Standard transitions: 320ms  
     - Overlays/modals: 360-400ms
     - Easing: ease-in-out only (no bounce, no elastic, no spring)
     ═══════════════════════════════════════════════════════════════════════════ */

  /* Standard interaction - hover, focus, state changes */
  .transition-interaction {
    @apply transition-all duration-[280ms] ease-in-out;
  }

  /* Element transitions - accordions, tabs, content swaps */
  .transition-element {
    @apply transition-all duration-[320ms] ease-in-out;
  }

  /* Overlay/drawer transitions - slower, financial-grade motion */
  .transition-overlay {
    @apply transition-all duration-[360ms] ease-in-out;
  }

  /* Modal transitions - deliberate, premium feel */
  .transition-modal {
    @apply transition-all duration-[400ms] ease-in-out;
  }

  /* Opacity-only transitions for subtle state changes */
  .transition-opacity-institutional {
    @apply transition-opacity duration-[280ms] ease-in-out;
  }

  /* Transform transitions for position/scale changes */
  .transition-transform-institutional {
    @apply transition-transform duration-[320ms] ease-in-out;
  }

  /* ═══════════════════════════════════════════════════════════════════════════
     TEXT CLIPPING PREVENTION — INSTITUTIONAL READABILITY (LOCKED)
     
     Global rules to prevent text from being clipped mid-word/sentence.
     Secondary descriptions should wrap to 2 lines before truncating.
     ═══════════════════════════════════════════════════════════════════════════ */

  /* Secondary description text - 2-line clamp for mobile readability */
  .description-text {
    @apply line-clamp-2 break-words;
    line-height: 1.45;
  }

  /* Flex row text container - must have min-w-0 for text to wrap correctly */
  .flex-text-container {
    @apply min-w-0 flex-1;
  }

  /* Single-line title with ellipsis - intentional truncation */
  .title-text {
    @apply truncate;
    line-height: 1.3;
  }

  /* List row base - ensures proper spacing and flex behavior */
  .list-row {
    @apply flex items-center gap-3;
  }

  /* Mobile-safe line height for body text */
  .mobile-readable {
    line-height: 1.45;
  }
}

/* Legacy compact density section removed - see html[data-ui-density="compact"] in @layer components above */

/* ═══════════════════════════════════════════════════════════════════════════════
   TIPTAP RICH TEXT EDITOR — INSTITUTIONAL DARK THEME (LOCKED)

   Styling for the TipTap WYSIWYG editor used in Help article creation.
   Matches the institutional dark theme of the Help Workstation.
   ═══════════════════════════════════════════════════════════════════════════════ */

/* TipTap editor content area */
.ProseMirror {
  outline: none;
  min-height: 400px;
  padding: 16px;
}

.ProseMirror p {
  margin: 0 0 1em 0;
  line-height: 1.6;
}

.ProseMirror p:last-child {
  margin-bottom: 0;
}

/* Headings */
.ProseMirror h2 {
  font-size: 1.25em;
  font-weight: 600;
  margin: 1.5em 0 0.75em 0;
  color: #FFFFFF;
}

.ProseMirror h2:first-child {
  margin-top: 0;
}

.ProseMirror h3 {
  font-size: 1.1em;
  font-weight: 600;
  margin: 1.25em 0 0.5em 0;
  color: #FFFFFF;
}

/* Lists - proper bullet points */
.ProseMirror ul {
  list-style-type: disc;
  padding-left: 1.5em;
  margin: 0.75em 0;
}

.ProseMirror ul li {
  margin: 0.25em 0;
  padding-left: 0.25em;
}

.ProseMirror ul li::marker {
  color: #6B6B6B;
}

.ProseMirror ol {
  list-style-type: decimal;
  padding-left: 1.5em;
  margin: 0.75em 0;
}

.ProseMirror ol li {
  margin: 0.25em 0;
  padding-left: 0.25em;
}

.ProseMirror ol li::marker {
  color: #6B6B6B;
}

/* Nested lists */
.ProseMirror ul ul,
.ProseMirror ol ul {
  list-style-type: circle;
  margin: 0.25em 0;
}

.ProseMirror ul ol,
.ProseMirror ol ol {
  margin: 0.25em 0;
}

/* Links */
.ProseMirror a {
  color: #60A5FA;
  text-decoration: underline;
  text-underline-offset: 2px;
  cursor: pointer;
}

.ProseMirror a:hover {
  color: #93C5FD;
}

/* Bold and italic */
.ProseMirror strong {
  font-weight: 600;
  color: #FFFFFF;
}

.ProseMirror em {
  font-style: italic;
}

.ProseMirror u {
  text-decoration: underline;
  text-underline-offset: 2px;
}

/* Placeholder */
.ProseMirror p.is-editor-empty:first-child::before {
  content: attr(data-placeholder);
  color: #505050;
  float: left;
  height: 0;
  pointer-events: none;
}

/* Code blocks */
.ProseMirror code {
  background-color: #252525;
  border-radius: 4px;
  padding: 0.15em 0.4em;
  font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', monospace;
  font-size: 0.9em;
  color: #E5E5E5;
}

.ProseMirror pre {
  background-color: #1A1A1A;
  border: 1px solid #303030;
  border-radius: 6px;
  padding: 12px 16px;
  margin: 1em 0;
  overflow-x: auto;
}

.ProseMirror pre code {
  background: none;
  padding: 0;
  border-radius: 0;
}

/* Blockquotes */
.ProseMirror blockquote {
  border-left: 3px solid #404040;
  padding-left: 1em;
  margin: 1em 0;
  color: #8F8F8F;
}

/* Horizontal rule */
.ProseMirror hr {
  border: none;
  border-top: 1px solid #303030;
  margin: 1.5em 0;
}

/* Selection styling */
.ProseMirror ::selection {
  background-color: rgba(96, 165, 250, 0.3);
}

/* Focus styling for cursor */
.ProseMirror-focused {
  outline: none;
}
