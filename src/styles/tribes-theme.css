/**
 * ═══════════════════════════════════════════════════════════════════════════════
 * TRIBES CANONICAL THEME — Console Light (Stripe-like) + Dark Mode Support
 * ═══════════════════════════════════════════════════════════════════════════════
 * 
 * DEFAULT: Console Light
 * - Soft neutral canvas with white surfaces
 * - Stripe-like institutional aesthetic
 * - Subtle borders, no heavy shadows
 * - Brand blue (#0071E3) ONLY for focus/hover/links
 * 
 * DARK MODE (.dark class):
 * - Reserved for optional preference
 * - YouTube Studio-inspired soft dark
 * 
 * ENFORCEMENT:
 * - No component may hardcode colors outside these tokens
 * - All backgrounds must derive from --app-* or --tribes-* tokens
 * - All text must derive from --tribes-fg / --tribes-fg-secondary / --tribes-fg-muted
 * 
 * This file is the single source of truth for the Tribes color system.
 * ═══════════════════════════════════════════════════════════════════════════════
 */

:root {
  /* ═══════════════════════════════════════════════════════════════════════════
     MERCURY + STRIPE CHROME SYSTEM — Global Neutral Tokens (SINGLE SOURCE)
     
     Layout: Sidebar (grey) → Canvas (white) → Panels (grey) → Cards (white)
     Light, institutional, NO BLUE ACCENTS. Focus ring #0071E3 is the ONLY blue.
     ═══════════════════════════════════════════════════════════════════════════ */

  /* ─────────────────────────────────────────────────────────────────────────
     GLOBAL 4-SURFACE TOKENS (AUTHORITATIVE — STRIPE/MERCURY PRECISE)
     ───────────────────────────────────────────────────────────────────────── */
  
  /* Surface 1: Sidebar — Mercury-like neutral grey (R=G=B, NO blue tint) */
  --sidebar-bg: #FBFBFB;
  --app-sidebar-bg: #FBFBFB;
  
  /* Surface 2: Top bar/header — true white */
  --topbar-bg: #FFFFFF;
  --app-header-bg: #FFFFFF;
  
  /* Surface 3: Main page canvas — true white (Stripe/Mercury) */
  --page-bg: #FFFFFF;
  --app-bg: #FFFFFF;
  --app-canvas-bg: #FFFFFF;
  
  /* Surface 4: Panel/section backgrounds — Stripe-like light grey boxes */
  --panel-bg: #F5F6F8;
  
  /* Surface 5: Cards, tables — true white */
  --card-bg: #FFFFFF;
  --app-surface-bg: #FFFFFF;
  
  /* Global border: Subtle but visible (~10-12% black on white) */
  --border-subtle: #E6E8EC;
  --app-surface-border: #E6E8EC;
  
  /* Chrome border: Same as surface border for consistency */
  --app-chrome-border: #E6E8EC;
  
  /* Radius: Stripe-like restraint (10-12px) */
  --app-radius: 10px;
  --app-radius-sm: 8px;
  
  /* Focus ring: Brand blue for accessibility — THE ONLY BLUE IN THE SYSTEM */
  --app-focus: #0071E3;

  /* ─────────────────────────────────────────────────────────────────────────
     MERCURY SHELL TOKENS — Neutral Navigation States
     ───────────────────────────────────────────────────────────────────────── */
  
  /* Shell background: White canvas */
  --tribes-shell-bg: var(--page-bg);
  
  /* Mercury sidebar: Uses global sidebar token */
  --tribes-sidebar-bg-mercury: var(--sidebar-bg);
  
  /* Borders: Use global border token */
  --tribes-border-subtle: var(--border-subtle);
  
  /* Nav states: Subtle neutral washes (NO BLUE) */
  --tribes-nav-hover: #EAEBEE;
  --tribes-nav-active: #E2E4E8;
  
  /* Control styling */
  --tribes-control-bg: var(--card-bg);
  --tribes-control-border: var(--border-subtle);
  --tribes-control-placeholder: #9CA3AF;
  
  /* ─────────────────────────────────────────────────────────────────────────
     SEARCH BAR TOKENS — Stripe-like Pill Input (SINGLE SOURCE OF TRUTH)
     ───────────────────────────────────────────────────────────────────────── */
  --search-bg: #F3F4F6;           /* Stripe-like soft grey fill */
  --search-bg-focus: #FFFFFF;     /* White on focus */
  --search-border: transparent;    /* No border by default (Stripe-like) */
  --search-border-focus: #E6E8EC; /* Subtle border on focus */
  --search-placeholder: #9CA3AF;  /* Muted placeholder */
  --search-kbd-bg: #FFFFFF;       /* Keyboard hint background */
  --search-kbd-border: #E6E8EC;   /* Keyboard hint border */
  
  /* Neutral focus ring for Help Workstation (NO BLUE) */
  --tribes-focus-ring-neutral: rgba(17, 24, 39, 0.25);
  
  /* ─────────────────────────────────────────────────────────────────────────
     LEGACY TOKENS — Mapped to global surface system
     ───────────────────────────────────────────────────────────────────────── */
  
  /* Page background: Uses white canvas token */
  --tribes-bg: var(--page-bg);
  --tribes-bg-page: var(--page-bg);
  
  /* Header/sidebar: Uses global tokens */
  --tribes-header-bg: var(--topbar-bg);
  --tribes-sidebar-bg: var(--sidebar-bg);

  /* ─────────────────────────────────────────────────────────────────────────
     TEXT HIERARCHY — High contrast for readability
     ───────────────────────────────────────────────────────────────────────── */

  /* Primary text: Near-black for excellent readability */
  --tribes-fg: #111827;
  --tribes-text: #111827;

  /* Secondary text: Medium gray */
  --tribes-fg-secondary: #6B7280;
  --tribes-text-secondary: #6B7280;

  /* Muted text: Light gray for labels, captions */
  --tribes-fg-muted: #9CA3AF;
  --tribes-text-muted: #9CA3AF;

  /* ─────────────────────────────────────────────────────────────────────────
     SURFACE SYSTEM — Uses global 3-surface tokens
     ───────────────────────────────────────────────────────────────────────── */

  /* Card/panel surface: Uses global card-bg */
  --tribes-card: var(--card-bg);
  --tribes-surface: var(--card-bg);

  /* Card border: Uses global border-subtle */
  --tribes-card-border: var(--border-subtle);

  /* Table surface: Same as cards for consistency */
  --tribes-surface-table: var(--card-bg);

  /* Elevated surface: Slightly off-white for nested content */
  --tribes-surface-elevated: #F9FAFB;

  /* Nested surface: tertiary elevation */
  --tribes-surface-nested: #F3F4F6;

  /* ─────────────────────────────────────────────────────────────────────────
     BORDERS & DIVIDERS — Uses global border-subtle
     ───────────────────────────────────────────────────────────────────────── */

  /* Hairline borders: Uses global token */
  --tribes-border: var(--border-subtle);

  /* Divider: same as border for consistency */
  --tribes-divider: var(--border-subtle);

  /* Strong borders: emphasized separation */
  --tribes-border-strong: #D1D5DB;

  /* Soft shadow: very minimal for Mercury-like feel */
  --tribes-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);

  /* ─────────────────────────────────────────────────────────────────────────
     INTERACTIVE STATES — Clear hover/focus feedback
     ───────────────────────────────────────────────────────────────────────── */

  /* Focus ring: Brand blue */
  --tribes-focus-ring: #0071E3;

  /* Hover state: Very subtle wash */
  --tribes-hover: #F3F4F6;

  /* Active state: pressed feedback */
  --tribes-active: #E5E7EB;
}

/* ═══════════════════════════════════════════════════════════════════════════════
   DARK MODE — Applied via .dark class on <html>
   YouTube Studio-inspired soft dark (optional preference)
   ═══════════════════════════════════════════════════════════════════════════════ */

.dark {
  /* App chrome tokens - dark mode */
  --app-canvas-bg: #181818;
  --app-surface-bg: #212121;
  --app-surface-border: #303030;
  --app-sidebar-bg: #1E1E1E;
  --app-header-bg: #1E1E1E;
  --app-chrome-border: #303030;
  --app-focus: #0071E3;
  
  /* Legacy tokens */
  --tribes-bg: #181818;
  --tribes-bg-page: #181818;
  --tribes-header-bg: #1E1E1E;
  --tribes-sidebar-bg: #1E1E1E;

  /* Text hierarchy */
  --tribes-fg: #FFFFFF;
  --tribes-text: #FFFFFF;
  --tribes-fg-secondary: #AAAAAA;
  --tribes-text-secondary: #AAAAAA;
  --tribes-fg-muted: #717171;
  --tribes-text-muted: #717171;

  /* Surface system */
  --tribes-card: #212121;
  --tribes-surface: #212121;
  --tribes-card-border: #303030;
  --tribes-surface-table: #1E1E1E;
  --tribes-surface-elevated: #282828;
  --tribes-surface-nested: #2D2D2D;

  /* Borders & dividers */
  --tribes-border: #303030;
  --tribes-divider: #303030;
  --tribes-border-strong: #404040;
  --tribes-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);

  /* Interactive states */
  --tribes-focus-ring: #0071E3;
  --tribes-hover: #282828;
  --tribes-active: #303030;
  
  /* Search bar tokens - dark mode */
  --search-bg: #2D2D2D;
  --search-bg-focus: #212121;
  --search-border: transparent;
  --search-border-focus: #404040;
  --search-placeholder: #717171;
  --search-kbd-bg: #303030;
  --search-kbd-border: #404040;
}

/* iOS underlay rule - ensures underlay uses exact background */
#ios-underlay {
  background: var(--tribes-bg) !important;
}
