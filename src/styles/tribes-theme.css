/**
 * ═══════════════════════════════════════════════════════════════════════════════
 * TRIBES CANONICAL THEME — Mercury/Stripe-like Light Institutional Chrome
 * ═══════════════════════════════════════════════════════════════════════════════
 * 
 * SINGLE SOURCE OF TRUTH for all visual tokens.
 * 
 * DESIGN PHILOSOPHY:
 * - Mercury/Stripe-like neutral chrome (NO BLUE fills)
 * - Brand blue (#0071E3) ONLY for focus rings (accessibility)
 * - All buttons are neutral grey (no black primary buttons)
 * - Institutional, professional, sophisticated
 * 
 * ENFORCEMENT:
 * - No component may hardcode colors outside these tokens
 * - All backgrounds must derive from --app-* or --tribes-* tokens
 * - No per-page styling hacks
 * 
 * This file is the single source of truth for the Tribes color system.
 * ═══════════════════════════════════════════════════════════════════════════════
 */

:root {
  /* ═══════════════════════════════════════════════════════════════════════════
     MERCURY + STRIPE CHROME SYSTEM — Global Neutral Tokens (SINGLE SOURCE)
     
     SURFACE HIERARCHY (3-layer):
     1. App canvas: #F3F4F6 (light grey backdrop behind everything)
     2. Content area: #FAFAFA (off-white main content region)
     3. Cards/tables: #FFFFFF (white surfaces with subtle border)
     
     Light, institutional, NO BLUE ACCENTS. Focus ring #0071E3 is the ONLY blue.
     ═══════════════════════════════════════════════════════════════════════════ */

  /* ─────────────────────────────────────────────────────────────────────────
     GLOBAL SURFACE TOKENS (AUTHORITATIVE — STRIPE/MERCURY PRECISE)
     
     User request: Exact neutral values, NO blue tint anywhere.
     ───────────────────────────────────────────────────────────────────────── */
  
  /* Layer 0: App canvas — overall app background behind everything */
  --app-canvas: #F4F5F7;
  --page-bg: #F4F5F7;
  --app-bg: #F4F5F7;
  --app-canvas-bg: #F4F5F7;
  
  /* Layer 1: Content area — PURE WHITE for Harvey.ai-like hierarchy */
  --content-bg: #FFFFFF;
  
  /* Layer 2: Sidebar — slightly darker for clear separation */
  --sidebar-bg: #F4F5F7;
  --app-sidebar-bg: #F4F5F7;
  
  /* Layer 3: Top bar/header — pure white to match content */
  --topbar-bg: #FFFFFF;
  --app-header-bg: #FFFFFF;
  
  /* Layer 4: Cards, tables, panels — pure white */
  --card-bg: #FFFFFF;
  --panel-bg: #FFFFFF;
  --app-surface-bg: #FFFFFF;
  
  /* Muted wash — for active pills, hover backgrounds */
  --muted-wash: #F2F3F5;
  
  /* ─────────────────────────────────────────────────────────────────────────
     BORDER TOKENS — Two-tier system
     ───────────────────────────────────────────────────────────────────────── */
  --border-subtle: #E2E5EA;
  --border-strong: #D1D5DB;
  --app-surface-border: #E2E5EA;
  --app-chrome-border: #E6E8EC;
  
  /* Radius: Stripe-like restraint (6-10px) */
  --app-radius: 8px;
  --app-radius-sm: 6px;
  
  /* Focus ring: Brand blue for accessibility — THE ONLY BLUE IN THE SYSTEM */
  --app-focus: #0071E3;

  /* ─────────────────────────────────────────────────────────────────────────
     BUTTON TOKENS — Mercury/Stripe Neutral Surface (NO BLACK, NO BLUE)
     
     Default/secondary buttons use light neutral grey fill.
     Visible on BOTH grey canvas (#F3F4F6) and white cards.
     NO heavy borders — Mercury-like transparent/subtle.
     ───────────────────────────────────────────────────────────────────────── */
  --btn-bg: #F1F3F5;
  --btn-bg-hover: #E9ECEF;
  --btn-bg-active: #E1E4E8;
  --btn-border: transparent;
  --btn-border-hover: transparent;
  --btn-text: #1F2937;
  
  /* Primary button tokens — dark grey (Harvey.ai-like) */
  --btn-primary-bg: #1F2937;
  --btn-primary-bg-hover: #374151;
  --btn-primary-text: #FFFFFF;
  --btn-text-muted: #6B7280;
  --btn-disabled-opacity: 0.5;
  
  /* Outline variant (for secondary actions) — subtle border */
  --btn-outline-bg: transparent;
  --btn-outline-border: var(--border-subtle);
  --btn-outline-hover-bg: #F5F6F8;

  /* ─────────────────────────────────────────────────────────────────────────
     ALERT/NOTICE TOKENS — Neutral-first with semantic variants
     
     REPLACES peach/orange system-wide. Use these instead.
     ───────────────────────────────────────────────────────────────────────── */
  
  /* Neutral notice (default) */
  --notice-bg: #F3F4F6;
  --notice-border: #D1D5DB;
  --notice-text: #374151;
  
  /* Warning (soft amber, not peach/orange) */
  --warning-bg: #FFFBEB;
  --warning-border: #FCD34D;
  --warning-text: #92400E;
  
  /* Error */
  --error-bg: #FEF2F2;
  --error-border: #FECACA;
  --error-text: #991B1B;
  
  /* Success */
  --success-bg: #F0FDF4;
  --success-border: #BBF7D0;
  --success-text: #166534;
  
  /* Info */
  --info-bg: #EFF6FF;
  --info-border: #BFDBFE;
  --info-text: #1E40AF;

  /* ─────────────────────────────────────────────────────────────────────────
     MERCURY SHELL TOKENS — Neutral Navigation States
     ───────────────────────────────────────────────────────────────────────── */
  
  /* Shell background: White canvas */
  --tribes-shell-bg: var(--page-bg);
  
  /* Mercury sidebar: Uses global sidebar token */
  --tribes-sidebar-bg-mercury: var(--sidebar-bg);
  
  /* Borders: Use global border token */
  --tribes-border-subtle: var(--border-subtle);
  
  /* Nav states: Subtle neutral washes (NO BLUE) */
  --tribes-nav-hover: #EAEBEE;
  --tribes-nav-active: #E2E4E8;
  
  /* Control styling */
  --tribes-control-bg: var(--card-bg);
  --tribes-control-border: var(--border-subtle);
  --tribes-control-placeholder: #9CA3AF;
  
  /* ─────────────────────────────────────────────────────────────────────────
     SEARCH BAR TOKENS — Stripe-like Pill Input (SINGLE SOURCE OF TRUTH)
     ───────────────────────────────────────────────────────────────────────── */
  --search-bg: #F3F4F6;           /* Stripe-like soft grey fill */
  --search-bg-focus: #FFFFFF;     /* White on focus */
  --search-border: transparent;    /* No border by default (Stripe-like) */
  --search-border-focus: #E6E8EC; /* Subtle border on focus */
  --search-placeholder: #9CA3AF;  /* Muted placeholder */
  --search-kbd-bg: #FFFFFF;       /* Keyboard hint background */
  --search-kbd-border: #E6E8EC;   /* Keyboard hint border */
  
  /* Neutral focus ring for Help Workstation (NO BLUE) */
  --tribes-focus-ring-neutral: rgba(17, 24, 39, 0.25);
  
  /* ─────────────────────────────────────────────────────────────────────────
     LEGACY TOKENS — Mapped to global surface system
     ───────────────────────────────────────────────────────────────────────── */
  
  /* Page background: Uses white canvas token */
  --tribes-bg: var(--page-bg);
  --tribes-bg-page: var(--page-bg);
  
  /* Header/sidebar: Uses global tokens */
  --tribes-header-bg: var(--topbar-bg);
  --tribes-sidebar-bg: var(--sidebar-bg);

  /* ─────────────────────────────────────────────────────────────────────────
     TEXT HIERARCHY — High contrast for readability
     ───────────────────────────────────────────────────────────────────────── */

  /* Primary text: Near-black for excellent readability */
  --tribes-fg: #111827;
  --tribes-text: #111827;
  --text: #111827;

  /* Secondary text: Medium gray */
  --tribes-fg-secondary: #6B7280;
  --tribes-text-secondary: #6B7280;

  /* Muted text: Light gray for labels, captions */
  --tribes-fg-muted: #9CA3AF;
  --tribes-text-muted: #9CA3AF;
  --text-muted: #9CA3AF;

  /* ─────────────────────────────────────────────────────────────────────────
     SURFACE SYSTEM — Uses global 3-surface tokens
     ───────────────────────────────────────────────────────────────────────── */

  /* Card/panel surface: Uses global card-bg */
  --tribes-card: var(--card-bg);
  --tribes-surface: var(--card-bg);

  /* Card border: Uses global border-subtle */
  --tribes-card-border: var(--border-subtle);

  /* Table surface: Same as cards for consistency */
  --tribes-surface-table: var(--card-bg);

  /* Elevated surface: Slightly off-white for nested content */
  --tribes-surface-elevated: #F9FAFB;

  /* Nested surface: tertiary elevation */
  --tribes-surface-nested: #F3F4F6;

  /* ─────────────────────────────────────────────────────────────────────────
     BORDERS & DIVIDERS — Uses global border-subtle
     ───────────────────────────────────────────────────────────────────────── */

  /* Hairline borders: Uses global token */
  --tribes-border: var(--border-subtle);

  /* Divider: same as border for consistency */
  --tribes-divider: var(--border-subtle);

  /* Strong borders: emphasized separation */
  --tribes-border-strong: #D1D5DB;

  /* Soft shadow: very minimal for Mercury-like feel */
  --tribes-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);

  /* ─────────────────────────────────────────────────────────────────────────
     INTERACTIVE STATES — Clear hover/focus feedback
     ───────────────────────────────────────────────────────────────────────── */

  /* Focus ring: Brand blue */
  --tribes-focus-ring: #0071E3;

  /* Hover state: Very subtle wash */
  --tribes-hover: #F3F4F6;

  /* Active state: pressed feedback */
  --tribes-active: #E5E7EB;
}

/* ═══════════════════════════════════════════════════════════════════════════════
   DARK MODE — Applied via .dark class on <html>
   YouTube Studio-inspired soft dark (optional preference)
   ═══════════════════════════════════════════════════════════════════════════════ */

.dark {
  /* App chrome tokens - dark mode */
  --app-canvas-bg: #181818;
  --app-surface-bg: #212121;
  --app-surface-border: #303030;
  --app-sidebar-bg: #1E1E1E;
  --app-header-bg: #1E1E1E;
  --app-chrome-border: #303030;
  --app-focus: #0071E3;
  
  /* Button tokens - dark mode */
  --btn-bg: #2D2D2D;
  --btn-bg-hover: #3A3A3A;
  --btn-bg-active: #404040;
  --btn-border: #404040;
  --btn-border-hover: #505050;
  --btn-text: #FFFFFF;
  --btn-text-muted: #AAAAAA;
  
  /* Sidebar background - dark mode */
  --sidebar-bg: #1E1E1E;
  
  /* Legacy tokens */
  --tribes-bg: #181818;
  --tribes-bg-page: #181818;
  --tribes-header-bg: #1E1E1E;
  --tribes-sidebar-bg: #1E1E1E;

  /* Text hierarchy */
  --tribes-fg: #FFFFFF;
  --tribes-text: #FFFFFF;
  --text: #FFFFFF;
  --tribes-fg-secondary: #AAAAAA;
  --tribes-text-secondary: #AAAAAA;
  --tribes-fg-muted: #717171;
  --tribes-text-muted: #717171;
  --text-muted: #717171;

  /* Surface system */
  --tribes-card: #212121;
  --tribes-surface: #212121;
  --tribes-card-border: #303030;
  --tribes-surface-table: #1E1E1E;
  --tribes-surface-elevated: #282828;
  --tribes-surface-nested: #2D2D2D;

  /* Borders & dividers */
  --tribes-border: #303030;
  --tribes-divider: #303030;
  --tribes-border-strong: #404040;
  --tribes-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);

  /* Interactive states */
  --tribes-focus-ring: #0071E3;
  --tribes-hover: #282828;
  --tribes-active: #303030;
  
  /* Search bar tokens - dark mode */
  --search-bg: #2D2D2D;
  --search-bg-focus: #212121;
  --search-border: transparent;
  --search-border-focus: #404040;
  --search-placeholder: #717171;
  --search-kbd-bg: #303030;
  --search-kbd-border: #404040;
  
  /* Muted wash - dark mode */
  --muted-wash: #2D2D2D;
}

/* iOS underlay rule - ensures underlay uses exact background */
#ios-underlay {
  background: var(--tribes-bg) !important;
}
